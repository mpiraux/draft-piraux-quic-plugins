<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>QUIC Plugins</title>
<meta content="Maxime Piraux" name="author">
<meta content="Quentin De Coninck" name="author">
<meta content="Francois Michel" name="author">
<meta content="Florentin Rochet" name="author">
<meta content="Olivier Bonaventure" name="author">
<meta content="
       This document proposes a new mechanism for extending the QUIC protocol
dynamically. QUIC Plugins allows modifying the behavior of a QUIC peer on a
per-connection basis. These plugins run inside a sandboxed environment
monitoring their executions. They can be combined to add their functionalities
to a given QUIC connection. 
       This document is a straw-man proposal. It aims at sparking discussions on the
proposed approach. TODO(mp): Encourage a place (ml ?) to discuss the approach 
    " name="description">
<meta content="xml2rfc 2.26.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<link href="draft-piraux-quic-plugins.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@import url('https://martinthomson.github.io/i-d-template/fonts.css');

html {
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --small-font-size: 14.5px;
}
body {
  max-width: 624px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
#title {
  padding: 1em 0 0.2em;
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1, h2, h3 {
  font-size: 22px;
  line-height: 26px;
}
h4, h5, h6 {
  font-size: 18px;
  line-height: 22px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p, #abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 18px;
  line-height: 24px;
}
p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href].selfRef {
  color: var(--text-color);
}
a[href] {
  color: var(--link-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px 'Oxygen Mono', monospace;
}
pre {
  border: 1px solid var(--line-color);
  line-height: 17px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  pre {
    display: inline-block;
    overflow-x: auto;
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  pre + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #eee;
}
tr:nth-child(2n) > td {
  background-color: var(--background-color);
}
tr:nth-child(2n+1) > td {
  background-color: var(--highlight-color);
}
thead+tbody tr:nth-child(2n) > td {
  background-color: var(--highlight-color);
}
thead+tbody tr:nth-child(2n+1) > td {
  background-color: var(--background-color);
}
table caption {
  font-style: italic;
  margin: 0.3em 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  visibility: hidden;
  user-select: none;
}
a.pilcrow[href] { color: #ddd; }
a.pilcrow[href]:hover { text-decoration: none; }
@media screen {
  :hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 8em;
}
#identifiers dt {
  width: var(--identifier-width);
  margin: 0;
  clear: left;
  float: left;
  text-align: right;
}
#identifiers dd {
  margin: 0 0 0 calc(1em + var(--identifier-width));
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    column-count: 2;
    column-gap: 20px;
  }
  .index ul ul {
    column-count: 1;
    column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 600px) {
  #authors-addresses {
    display: relative;
    padding: 32px 0 0;
    column-count: 2;
    column-gap: 20px;
  }
  #name-authors-addresses {
    position: absolute;
    top: 0px;
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
  }
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #b76427;
  background-color: rgba(249, 232, 105, 0.3);
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: rgba(249, 232, 105, 0.3);
  border-radius: 3px;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 953px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 954px) {
  body {
    padding-right: 380px;
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul p, #toc ul li {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<script>
async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#metadata");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("metadata");if(e){e.style.background="#eee";try{var t;t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t),s=(await o.json())[0],r="",d="https://datatracker.ietf.org/doc",l="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",n=s.doc_id.toLowerCase(),i=s.doc_id.slice(0,3).toLowerCase(),f=s.doc_id.slice(3).replace(/^0+/,""),h={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let u="<dl style='overflow:hidden'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){s[e]=s[e].toLowerCase();var t=s[e].split(" ");sLen=t.length;var o="",p=1;for(let e=0;e<sLen;e++)p<sLen?o=o+a(t[e])+" ":o+=a(t[e]),p++;s[e]=o}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var b,g="",y=1;b=s[e].length;for(let t=0;t<b;t++)s[e][t]&&(s[e][t]=String(s[e][t]).toLowerCase(),g=y<b?g+"<a href='"+r+"/rfc/".concat(s[e][t])+"'>"+s[e][t].slice(3)+"</a>, ":g+"<a href='"+r+"/rfc/".concat(s[e][t])+"'>"+s[e][t].slice(3)+"</a>",y++);s[e]=g}else if("see_also"==e){var m,w="",L=1;m=s[e].length;for(let t=0;t<m;t++)if(s[e][t]){s[e][t]=String(s[e][t]);var _=s[e][t].slice(0,3),v=s[e][t].slice(3).replace(/^0+/,"");w=L<m?w+"<a href='"+r+"/"+_.toLowerCase()+"/".concat(v.toLowierCase())+"'>"+_+" "+v+"</a>, ":w+"<a href='"+r+"/"+_.toLowerCase()+"/".concat(v.toLowerCase())+"'>"+_+" "+v+"</a>",L++}s[e]=w}else if("errata_url"==e){var C="";C=s[e]?C+"<a href='"+s[e]+"'>Errata exist</a>, <a href='"+d+"/"+n+"'>Datatracker</a>, <a href='"+l+"/?"+i+"="+f+"&submit="+i+"'>IPR</a>, <a href='"+c+"/"+n+"'>Info page</a>":"<a href='"+d+"/"+n+"'>Datatracker</a>, <a href='"+l+"/?"+i+"="+f+"&submit="+i+"'>IPR</a>, <a href='"+c+"/"+n+"'>Info page</a>",s[e]=C}""!=s[e]?"Errata"==h[e]?u+=`<dt>More info:</dt><dd>${s[e]}</dd>`:u+=`<dt>${h[e]}:</dt><dd>${s[e]}</dd>`:"Errata"==h[e]&&(u+=`<dt>More info:</dt><dd>${s[e]}</dd>`)}),u+="</dl>",e.innerHTML=u}catch(e){console.log(e)}}else console.log("Could not locate metadata <div> element");function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.addEventListener("load",addMetadata);</script>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">QUIC Plugins</td>
<td class="right">February 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Piraux, et al.</td>
<td class="center">Expires 27 August 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-piraux-quic-plugins-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-02-24" class="published">24 February 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-08-27">27 August 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Piraux</div>
<div class="org">UCLouvain</div>
</div>
<div class="author">
      <div class="author-name">Q. De Coninck</div>
<div class="org">UCLouvain</div>
</div>
<div class="author">
      <div class="author-name">F. Michel</div>
<div class="org">UCLouvain</div>
</div>
<div class="author">
      <div class="author-name">F. Rochet</div>
<div class="org">UCLouvain</div>
</div>
<div class="author">
      <div class="author-name">O. Bonaventure</div>
<div class="org">UCLouvain</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">QUIC Plugins</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document proposes a new mechanism for extending the QUIC protocol
dynamically. QUIC Plugins allows modifying the behavior of a QUIC peer on a
per-connection basis. These plugins run inside a sandboxed environment
monitoring their executions. They can be combined to add their functionalities
to a given QUIC connection.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This document is a straw-man proposal. It aims at sparking discussions on the
proposed approach. TODO(mp): Encourage a place (ml ?) to discuss the approach<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-note-to-readers">
<a href="#name-note-to-readers" class="section-name selfRef">Note to Readers</a>
      </h2>
<p id="section-note.1-1">Discussion of this document takes place on the
  QUIC Working Group mailing list (quic@ietf.org),
  which is archived at <a href="https://mailarchive.ietf.org/arch/browse/quic/">https://mailarchive.ietf.org/arch/browse/quic/</a>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Source for this draft and an issue tracker can be found at
  <a href="https://github.com/mpiraux/draft-piraux-quic-plugins">https://github.com/mpiraux/draft-piraux-quic-plugins</a>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 27 August 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-boilerplate.3">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.1">
            <p id="section-boilerplate.3-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-boilerplate.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.2">
            <p id="section-boilerplate.3-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-architecture" class="xref">Architecture</a><a href="#section-boilerplate.3-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.3">
            <p id="section-boilerplate.3-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-conventions-and-definitions" class="xref">Conventions and Definitions</a><a href="#section-boilerplate.3-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.4">
            <p id="section-boilerplate.3-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-making-quic-easier-to-exten" class="xref">Making QUIC easier to extend</a><a href="#section-boilerplate.3-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.5">
            <p id="section-boilerplate.3-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-what-is-a-plugin" class="xref">What is a plugin ?</a><a href="#section-boilerplate.3-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.6">
            <p id="section-boilerplate.3-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-examples-of-use-cases" class="xref">Examples of use-cases</a><a href="#section-boilerplate.3-1.6.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.6.2.1">
                <p id="section-boilerplate.3-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-application-driven-stream-s" class="xref">Application-driven stream scheduling</a><a href="#section-boilerplate.3-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.6.2.2">
                <p id="section-boilerplate.3-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-pluggable-congestion-contro" class="xref">Pluggable congestion controller</a><a href="#section-boilerplate.3-1.6.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.6.2.3">
                <p id="section-boilerplate.3-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-tunable-acknowledgments-pol" class="xref">Tunable acknowledgments policy</a><a href="#section-boilerplate.3-1.6.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.7">
            <p id="section-boilerplate.3-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-injecting-accepting-quic-pl" class="xref">Injecting/accepting QUIC Plugins</a><a href="#section-boilerplate.3-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.8">
            <p id="section-boilerplate.3-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-exchanging-quic-plugins" class="xref">Exchanging QUIC Plugins</a><a href="#section-boilerplate.3-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.9">
            <p id="section-boilerplate.3-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-trusting-quic-plugins" class="xref">Trusting QUIC Plugins</a><a href="#section-boilerplate.3-1.9.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.10">
            <p id="section-boilerplate.3-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-boilerplate.3-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.11">
            <p id="section-boilerplate.3-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-boilerplate.3-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.12">
            <p id="section-boilerplate.3-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-references" class="xref">References</a><a href="#section-boilerplate.3-1.12.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.12.2.1">
                <p id="section-boilerplate.3-1.12.2.1.1"><a href="#section-12.1" class="xref">12.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-boilerplate.3-1.12.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.12.2.2">
                <p id="section-boilerplate.3-1.12.2.2.1"><a href="#section-12.2" class="xref">12.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-boilerplate.3-1.12.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.13">
            <p id="section-boilerplate.3-1.13.1"><a href="#section-appendix.a" class="xref"></a>  <a href="#name-acknowledgments" class="xref">Acknowledgments</a><a href="#section-boilerplate.3-1.13.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.14">
            <p id="section-boilerplate.3-1.14.1"><a href="#section-appendix.b" class="xref"></a>  <a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-boilerplate.3-1.14.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Internet hosts rely on protocols to efficiently exchange
information. Most protocols are designed assuming a layer model.
A protocol provides a service to a user at the above layer. It
interacts with this user through specific commands and responses that
are often represented as an Application Programming Interface (API).
Protocol implementations exchange messages with other implementations
by leveraging the service provided by the underlying layer. For
example, a TCP implementation interacts through the socket API and
exchanges TCP segments with remote hosts through the underlying IP
protocol. Protocol designers usually define transport
and application protocols in two parts:<a href="#section-1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-1-2.1">a series of messages that are encoded using a specific format<a href="#section-1-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-2.2">a Finite State Machine that defines how hosts react to commands
from the layer above or the reception of a specific messages<a href="#section-1-2.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-3">This model has been used to represent a wide range of Internet
protocols. However, there are some limits to the flexibility of
these protocols as illustrated by recent discussions.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">A first example is the transmission of acknowledgments in reliable
transport protocols. There is a trade-off between the feedback provided
by the acknowledgments and the resources (bandwidth and CPU)
required to generate and process them. Various heuristics have
been proposed in TCP to generate these ACKs
<span>[<a href="#RFC1122" class="xref">RFC1122</a>]</span>,<span>[<a href="#RFC2581" class="xref">RFC2581</a>]</span>,<span>[<a href="#RFC3449" class="xref">RFC3449</a>]</span>,<span>[<a href="#RFC5690" class="xref">RFC5690</a>]</span>. These heuristics are deployed
independently on receivers, but for some of them the senders need to
adapt by at least taking into account the fact that some
acknowledgments were delayed while measuring the round-trip-time.
A similar discussion has started for QUIC. Given the flexibility of
QUIC, some researchers have proposed to define an acknowledgment
strategy as a set of parameters that are exchanged in a new QUIC frame
over each connection
<span>[<a href="#I-D.fairhurst-quic-ack-scaling" class="xref">I-D.fairhurst-quic-ack-scaling</a>]</span>,<span>[<a href="#I-D.iyengar-quic-delayed-ack" class="xref">I-D.iyengar-quic-delayed-ack</a>]</span>. This brings
more flexibility than in TCP where the limited size of the header
made it impossible to exchange such information, but it also affects
the round-trip-time estimation <span>[<a href="#I-D.ietf-quic-transport" class="xref">I-D.ietf-quic-transport</a>]</span>.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">A second example in the application layer
is the support for stream priorities in HTTP/2 <span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span>. Since
HTTP/2 provides parallel streams, some application developers have
expressed their need to be able to prioritize some streams over
others. The HTTP/2 protocol defines such priorities, but they are
not widely used and some have proposed to deprecate them
<span>[<a href="#I-D.peon-httpbis-h2-priority-one-less" class="xref">I-D.peon-httpbis-h2-priority-one-less</a>]</span>. In spite of this, a
proposal for stream
prioritization for HTTP/3 already exists <span>[<a href="#I-D.kazuho-httpbis-priority" class="xref">I-D.kazuho-httpbis-priority</a>]</span>.
<span>[<a href="#LNBIP2020" class="xref">LNBIP2020</a>]</span> evaluates stream scheduling for HTTP/3 and
claims that performances are heavily impacted by the adopted stream
scheduling.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">These examples illustrate the difficulty of precisely expressing
complex behaviors in a few parameters that are exchanged inside
packets. In this document, we leverage the recent results in
extending operating system kernels <span>[<a href="#TODO" class="xref">TODO</a>]</span> or web-browsers <span>[<a href="#TODO" class="xref">TODO</a>]</span>
with virtual machines that execute bytecodes to propose a new
approach to define complex behaviors inside protocols. We first
describe the general architecture of the proposed approach in
<a href="#archi" class="xref">Section 2</a>. We then provide a few examples showing how such an
approach could be applied to the next version of the QUIC protocol in
<a href="#pquic" class="xref">Section 4</a>.<a href="#section-1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="archi">
<section id="section-2">
      <h2 id="name-architecture">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-architecture" class="section-name selfRef">Architecture</a>
    </h2>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-3">
      <h2 id="name-conventions-and-definitions">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-3-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
when, and only when, they appear in all capitals, as shown here.<a href="#section-3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pquic">
<section id="section-4">
      <h2 id="name-making-quic-easier-to-exten">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-making-quic-easier-to-exten" class="section-name selfRef">Making QUIC easier to extend</a>
    </h2>
</section>
</div>
<div id="what-is-a-plugin-">
<section id="section-5">
      <h2 id="name-what-is-a-plugin">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-what-is-a-plugin" class="section-name selfRef">What is a plugin ?</a>
      </h2>
<p id="section-5-1">TODO(mp): Change the section title, I don't like it<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">A QUIC Plugin consists of platform-independent bytecode which modify or extend the
behavior of a QUIC implementation. This document considers the behavior of a
QUIC implementation as a set of functions, also named protocol operations.
Adding the functionality of a QUIC Plugin, i.e. adding or replacing a set of
protocol operations, to a QUIC connection is referred to as injecting a QUIC
Plugin. Injecting a plugin is limited to a given connection.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">Its bytecode is run inside a sandboxed execution environment. It accesses to the
state of a QUIC connection through a restricted API.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">The scope of a QUIC Plugin is restricted by both the limitations of this
execution environment, e.g. in terms of instruction set and quantity, and by the
surface exposed by this API, e.g. the quantity of state that can be read from or
written to by a plugin. The API also defines a set of protocol operations to
which QUIC Plugins can be injected. For instance, a QUIC implementation might
restrict QUIC Plugins injection to its acknowledgment generation policy, e.g.
the protocol operation deciding whether sending an ACK frame is needed.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">A QUIC Plugin can be injected by several means. The application can inject
plugins to tune its underlying QUIC connection. QUIC peers can exchange and
inject plugins over a QUIC connection, as described in <a href="#exchanging-plugins" class="xref">Section 8</a>.
Users can set a default configuration to inject plugins on their devices.<a href="#section-5-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="examples-of-use-cases">
<section id="section-6">
      <h2 id="name-examples-of-use-cases">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-examples-of-use-cases" class="section-name selfRef">Examples of use-cases</a>
      </h2>
<p id="section-6-1">There exist several cases in which being able to modify the behavior of a QUIC
peer is beneficial. <span>[<a href="#PQUIC" class="xref">PQUIC</a>]</span> demonstrates how this approach can be used to
deploy existing QUIC extensions such as Multipath QUIC
<span>[<a href="#I-D.deconinck-multipath-quic" class="xref">I-D.deconinck-multipath-quic</a>]</span> and <span>[<a href="#QUIC-FEC" class="xref">QUIC-FEC</a>]</span>. This first version of the
document focus on enabling the extension of simpler QUIC mechanisms. Three of
them are documented in this section. Contributions regarding new uses-cases are
welcomed.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="application-driven-stream-scheduling">
<section id="section-6.1">
        <h3 id="name-application-driven-stream-s">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-application-driven-stream-s" class="section-name selfRef">Application-driven stream scheduling</a>
        </h3>
<p id="section-6.1-1">QUIC streams allow the application to multiplex several bytestreams over a
single QUIC connection. Yet, the QUIC specification does not provide a mechanism
for exchanging prioritization information nor for indicating the relative
priority of streams. As described in Section 2.3 of <span>[<a href="#I-D.ietf-quic-transport" class="xref">I-D.ietf-quic-transport</a>]</span>,
A QUIC implementation SHOULD provide ways in which an application can indicate
the relative priority of streams. A QUIC implementation could allow QUIC
Plugins to extend or override its stream scheduler.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">For other applications over QUIC with a broad range of requirements, a flexible
approach for defining the stream scheduling policy is key to best fit their
needs. QUIC Plugin offer a flexible way to embed application knowledge inside
the QUIC implementation.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pluggable-congestion-controller">
<section id="section-6.2">
        <h3 id="name-pluggable-congestion-contro">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-pluggable-congestion-contro" class="section-name selfRef">Pluggable congestion controller</a>
        </h3>
<p id="section-6.2-1">There exists many congestion control algorithms. Each of them has
been designed for a given context, i.e. a range of applications and a range of
Internet paths. For instance, Reno <span>[<a href="#TODO" class="xref">TODO</a>]</span> has been designed for optimizing the
web use-case on common Internet paths. Westwood <span>[<a href="#TODO" class="xref">TODO</a>]</span> is a modification of
Reno to better accommodate Internet paths with a high bandwidth-delay product,
such as satellite links.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">Efforts to restructure congestion controllers within a common framework have
been presented in past works such as <span>[<a href="#CCP" class="xref">CCP</a>]</span>. Such a framework eases the
development and maintenance of those algorithms. It also enables rapid
prototyping and A/B testing.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3"><span>[<a href="#TCP-Options-BPF" class="xref">TCP-Options-BPF</a>]</span> proposes a new TCP Option, leveraging the TCP-BPF
framework, to negotiate the congestion controller to use.
The QUIC specification does not specify a similar mechanism. Negotiating the
congestion controller used allows one endpoint to tune the other, provided that
it implements the algorithm. QUIC Plugins could allow the application to directly
plug the required congestion controller and to exchange it with the other peer.
This flexibility allows the application to choose the best congestion controller
for its requirements.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="tunable-acknowledgments-policy">
<section id="section-6.3">
        <h3 id="name-tunable-acknowledgments-pol">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-tunable-acknowledgments-pol" class="section-name selfRef">Tunable acknowledgments policy</a>
        </h3>
<p id="section-6.3-1">The large diversity of Internet paths also counts networks involving a
significant path asymmetry. Those paths often impact the ability of the receiver
to provide feedback to the sender. The performance of transport protocols such
as TCP has been studied in depth and reported in <span>[<a href="#RFC3449" class="xref">RFC3449</a>]</span>. A method for
controlling the rate of receiver feedback of TCP, i.e. the rate of ACKs, has
been proposed in <span>[<a href="#RFC5690" class="xref">RFC5690</a>]</span>.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">Proposals for controlling the acknowledgment policy of QUIC already exist.
<span>[<a href="#I-D.fairhurst-quic-ack-scaling" class="xref">I-D.fairhurst-quic-ack-scaling</a>]</span> proposes a change to the default policy for
asymmetric paths. <span>[<a href="#I-D.iyengar-quic-delayed-ack" class="xref">I-D.iyengar-quic-delayed-ack</a>]</span> describes a QUIC extension
enabling a QUIC endpoint to control the acknowledgment policy of its peer. For
that purpose, they model the acknowledgment policy depending on a few parameters
and introduce a new QUIC frame to signal new values for those parameters.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<p id="section-6.3-3">A QUIC Plugin could allow implementing a new acknowledgment with a fine
granularity. For example, in the case of an application that generates bursty
traffic, such as a real-time video streaming application, a QUIC Plugin allows
embedding application knowledge, i.e. the characteristics of such bursts, inside
the acknowledgment generation policy. Exchanging and injecting this plugin
allows controlling the other peer behavior.<a href="#section-6.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="injectingaccepting-quic-plugins">
<section id="section-7">
      <h2 id="name-injecting-accepting-quic-pl">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-injecting-accepting-quic-pl" class="section-name selfRef">Injecting/accepting QUIC Plugins</a>
      </h2>
<p id="section-7-1">Injecting a QUIC Plugin to a QUIC implementation requires several
modifications. First, an execution environment is required to execute the
plugin, as it does not consist of executable machine code. This environment
executes the bytecode of QUIC Plugins. This bytecode is portable and has a
limited instruction set, such as eBPF or WebAssembly bytecode. The plugin runs
thus in an isolated environment inside the QUIC implementation.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">The QUIC implementation is responsible for interacting with the plugin, i.e.
running its bytecode and providing restricted access to the QUIC connection
state. For example, a QUIC implementation that accepts plugins deciding whether
an acknowledgment has to be sent should execute the plugin every time this
decision is considered and provide access to relevant state for computing this
decision. A QUIC implementation that accepts plugins implementing a congestion
controller may provide write access to some state, for example the congestion
window of a given path, so that the plugin can modify the state of the
QUIC connection.<a href="#section-7-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="exchanging-plugins">
<section id="section-8">
      <h2 id="name-exchanging-quic-plugins">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-exchanging-quic-plugins" class="section-name selfRef">Exchanging QUIC Plugins</a>
      </h2>
<p id="section-8-1">Injecting QUIC Plugins locally in the underlying QUIC implementation allows the
application to tune it to its needs. But some use-cases requires adapting the
peer behavior. In those cases, being able to exchange plugins helps to fill
that gap.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">In order to negotiate the use of QUIC Plugins, new transport parameters could be
used to announce the plugins that should be injected. Each QUIC peer announces
the plugins it supports and the plugins that it would like to inject to the
other peer. A local policy could restrict the type of plugins that can be
exchanged and injected. Once the QUIC handshake completes and the QUIC Plugins
transport parameters have been exchanged, plugins exchange can take place next
to the data transfer, using a new dedicated stream type akin to the crypto
stream.<a href="#section-8-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="trusting-quic-plugins">
<section id="section-9">
      <h2 id="name-trusting-quic-plugins">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-trusting-quic-plugins" class="section-name selfRef">Trusting QUIC Plugins</a>
      </h2>
<p id="section-9-1">Each QUIC Plugin MUST be associated to some level of trust regarding its origin.
For instance, a QUIC Plugin MAY be authenticated using a certificate. A QUIC
implementation accepting plugins MAY restrict the exchange of QUIC Plugins and
only accept plugins authenticated using the same certificate used for
establishing the QUIC connection.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">A QUIC endpoint MAY forbid the injection of received QUIC Plugins, while still
being able to send QUIC Plugins to its peer.<a href="#section-9-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">TODO Security<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1">This document has no IANA actions.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="CCP">[CCP]</dt>
        <dd>
<span class="refAuthor">Narayan, A.</span><span class="refAuthor">, Cangialosi, F.</span><span class="refAuthor">, Raghavan, D.</span><span class="refAuthor">, Goyal, P.</span><span class="refAuthor">, Narayana, S.</span><span class="refAuthor">, Mittal, R.</span><span class="refAuthor">, Alizadeh, M.</span><span class="refAuthor">, and H. Balakrishnan</span>, <span class="refTitle">"Restructuring Endpoint Congestion Control"</span>, <time datetime="2018-08">August 2018</time>. </dd>
<dt id="I-D.deconinck-multipath-quic">[I-D.deconinck-multipath-quic]</dt>
        <dd>
<span class="refAuthor">Coninck, Q.</span><span class="refAuthor"> and O. Bonaventure</span>, <span class="refTitle">"Multipath Extension for QUIC"</span>, <span class="seriesInfo">Internet Draft, draft-deconinck-multipath-quic-00</span>, <time datetime="2017-10-30">30 October 2017</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-deconinck-multipath-quic-00.txt">http://www.ietf.org/internet-drafts/draft-deconinck-multipath-quic-00.txt</a>&gt;</span>. </dd>
<dt id="I-D.fairhurst-quic-ack-scaling">[I-D.fairhurst-quic-ack-scaling]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G.</span><span class="refAuthor">, Custura, A.</span><span class="refAuthor">, and T. Jones</span>, <span class="refTitle">"Changing the Default QUIC ACK Policy"</span>, <span class="seriesInfo">Internet Draft, draft-fairhurst-quic-ack-scaling-00</span>, <time datetime="2020-01-29">29 January 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-fairhurst-quic-ack-scaling-00.txt">http://www.ietf.org/internet-drafts/draft-fairhurst-quic-ack-scaling-00.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</dt>
        <dd>
<span class="refAuthor">Iyengar, J.</span><span class="refAuthor"> and M. Thomson</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">Internet Draft, draft-ietf-quic-transport-27</span>, <time datetime="2020-02-21">21 February 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-transport-27.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-transport-27.txt</a>&gt;</span>. </dd>
<dt id="I-D.iyengar-quic-delayed-ack">[I-D.iyengar-quic-delayed-ack]</dt>
        <dd>
<span class="refAuthor">Iyengar, J.</span><span class="refAuthor"> and I. Swett</span>, <span class="refTitle">"Sender Control of Acknowledgement Delays in QUIC"</span>, <span class="seriesInfo">Internet Draft, draft-iyengar-quic-delayed-ack-00</span>, <time datetime="2020-01-23">23 January 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-iyengar-quic-delayed-ack-00.txt">http://www.ietf.org/internet-drafts/draft-iyengar-quic-delayed-ack-00.txt</a>&gt;</span>. </dd>
<dt id="I-D.kazuho-httpbis-priority">[I-D.kazuho-httpbis-priority]</dt>
        <dd>
<span class="refAuthor">Oku, K.</span><span class="refAuthor"> and L. Pardue</span>, <span class="refTitle">"Extensible Prioritization Scheme for HTTP"</span>, <span class="seriesInfo">Internet Draft, draft-kazuho-httpbis-priority-04</span>, <time datetime="2019-11-20">20 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-kazuho-httpbis-priority-04.txt">http://www.ietf.org/internet-drafts/draft-kazuho-httpbis-priority-04.txt</a>&gt;</span>. </dd>
<dt id="I-D.peon-httpbis-h2-priority-one-less">[I-D.peon-httpbis-h2-priority-one-less]</dt>
        <dd>
<span class="refAuthor">Thomson, M.</span><span class="refAuthor"> and R. Peon</span>, <span class="refTitle">"Deprecation of HTTP/2 Priority Signaling Hints"</span>, <span class="seriesInfo">Internet Draft, draft-peon-httpbis-h2-priority-one-less-00</span>, <time datetime="2019-07-25">25 July 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-peon-httpbis-h2-priority-one-less-00.txt">http://www.ietf.org/internet-drafts/draft-peon-httpbis-h2-priority-one-less-00.txt</a>&gt;</span>. </dd>
<dt id="LNBIP2020">[LNBIP2020]</dt>
        <dd>
<span class="refAuthor">Marx, R.</span><span class="refAuthor">, De Decker, T.</span><span class="refAuthor">, Quax, P.</span><span class="refAuthor">, and W. Lamotte</span>, <span class="refTitle">"Resource Multiplexing and Prioritization in HTTP/2 over TCP versus HTTP/3 over QUIC"</span>, <time datetime="2020-02">February 2020</time>. </dd>
<dt id="PQUIC">[PQUIC]</dt>
        <dd>
<span class="refAuthor">De Coninck, Q.</span><span class="refAuthor">, Michel, F.</span><span class="refAuthor">, Piraux, M.</span><span class="refAuthor">, Given-Wilson, T.</span><span class="refAuthor">, Legay, A.</span><span class="refAuthor">, Pereira, O.</span><span class="refAuthor">, and O. Bonaventure</span>, <span class="refTitle">"Pluginizing QUIC"</span>, <span class="seriesInfo">Proceedings of the ACM Special Interest Group on Data Communication </span>, <time datetime="2019-08">August 2019</time>. </dd>
<dt id="QUIC-FEC">[QUIC-FEC]</dt>
        <dd>
<span class="refAuthor">Michel, F.</span><span class="refAuthor">, De Coninck, Q.</span><span class="refAuthor">, and O. Bonaventure</span>, <span class="refTitle">"QUIC-FEC: Bringing the benefits of Forward Erasure Correction to QUIC"</span>, <time datetime="2019-05">May 2019</time>. </dd>
<dt id="RFC1122">[RFC1122]</dt>
        <dd>
<span class="refAuthor">Braden, R., Ed.</span>, <span class="refTitle">"Requirements for Internet Hosts - Communication Layers"</span>, <span class="seriesInfo">STD 3</span>, <span class="seriesInfo">RFC 1122</span>, <span class="seriesInfo">DOI 10.17487/RFC1122</span>, <time datetime="1989-10">October 1989</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1122">https://www.rfc-editor.org/info/rfc1122</a>&gt;</span>. </dd>
<dt id="RFC2581">[RFC2581]</dt>
        <dd>
<span class="refAuthor">Allman, M.</span><span class="refAuthor">, Paxson, V.</span><span class="refAuthor">, and W. Stevens</span>, <span class="refTitle">"TCP Congestion Control"</span>, <span class="seriesInfo">RFC 2581</span>, <span class="seriesInfo">DOI 10.17487/RFC2581</span>, <time datetime="1999-04">April 1999</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2581">https://www.rfc-editor.org/info/rfc2581</a>&gt;</span>. </dd>
<dt id="RFC3449">[RFC3449]</dt>
        <dd>
<span class="refAuthor">Balakrishnan, H.</span><span class="refAuthor">, Padmanabhan, V.</span><span class="refAuthor">, Fairhurst, G.</span><span class="refAuthor">, and M. Sooriyabandara</span>, <span class="refTitle">"TCP Performance Implications of Network Path Asymmetry"</span>, <span class="seriesInfo">BCP 69</span>, <span class="seriesInfo">RFC 3449</span>, <span class="seriesInfo">DOI 10.17487/RFC3449</span>, <time datetime="2002-12">December 2002</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3449">https://www.rfc-editor.org/info/rfc3449</a>&gt;</span>. </dd>
<dt id="RFC5690">[RFC5690]</dt>
        <dd>
<span class="refAuthor">Floyd, S.</span><span class="refAuthor">, Arcia, A.</span><span class="refAuthor">, Ros, D.</span><span class="refAuthor">, and J. Iyengar</span>, <span class="refTitle">"Adding Acknowledgement Congestion Control to TCP"</span>, <span class="seriesInfo">RFC 5690</span>, <span class="seriesInfo">DOI 10.17487/RFC5690</span>, <time datetime="2010-02">February 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5690">https://www.rfc-editor.org/info/rfc5690</a>&gt;</span>. </dd>
<dt id="RFC7540">[RFC7540]</dt>
        <dd>
<span class="refAuthor">Belshe, M.</span><span class="refAuthor">, Peon, R.</span><span class="refAuthor">, and M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;</span>. </dd>
<dt id="TCP-Options-BPF">[TCP-Options-BPF]</dt>
        <dd>
<span class="refAuthor">Tran, VH.</span><span class="refAuthor"> and O. Bonaventure</span>, <span class="refTitle">"Beyond socket options: making the Linux TCP stack truly extensible"</span>, <time datetime="2019-05">May 2019</time>. </dd>
<dt id="TODO">[TODO]</dt>
      <dd>
<span class="refAuthor">TODO, .</span>, <span class="refTitle">"TODO"</span>, <time datetime="2020-02">February 2020</time>. </dd>
</dl>
</section>
</section>
<div id="acknowledgments">
<section id="section-appendix.a">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-appendix.a-1">TODO acknowledge.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.b">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Maxime Piraux</span></div>
<div dir="auto" class="left"><span class="org">UCLouvain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:maxime.piraux@uclouvain.be" class="email">maxime.piraux@uclouvain.be</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Quentin De Coninck</span></div>
<div dir="auto" class="left"><span class="org">UCLouvain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:quentin.deconinck@uclouvain.be" class="email">quentin.deconinck@uclouvain.be</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Francois Michel</span></div>
<div dir="auto" class="left"><span class="org">UCLouvain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:francois.michel@uclouvain.be" class="email">francois.michel@uclouvain.be</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Florentin Rochet</span></div>
<div dir="auto" class="left"><span class="org">UCLouvain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:florentin.rochet@uclouvain.be" class="email">florentin.rochet@uclouvain.be</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Olivier Bonaventure</span></div>
<div dir="auto" class="left"><span class="org">UCLouvain</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:olivier.bonaventure@uclouvain.be" class="email">olivier.bonaventure@uclouvain.be</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>
</body>
</html>
